<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pasos Siman</title>
    <style>
      body {
        background-color: aqua;
      }
      .step-button {
        transition-duration: 0.5s;
        background-color: bisque;
        width: 150px;
        height: 70px;
        border-radius: 20%;
      }
      .selected {
        width: 200px;
        background-color: brown;
      }

      .instruction {
        width: 500px;
        height: 450px;
        background-color: coral;
        display: none;
      }
      .show-instruction {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="step-buttons-container">
      <button class="step-button selected">Paso 1</button>
      <button class="step-button">2</button>
      <button class="step-button">3</button>
      <button class="step-button">4</button>
    </div>

    <div class="instruction show-instruction" id="Instruction 1">
      Instrucciones paso 1
    </div>
    <div class="instruction" id="Instruction 2">Instrucciones paso 2</div>
    <div class="instruction" id="Instruction 3">Instrucciones paso 3</div>
    <div class="instruction" id="Instruction 4">Instrucciones paso 4</div>
  </body>
  <script>
    const step_buttons = document.querySelectorAll(".step-button");
    const step_instructions = document.querySelectorAll(".instruction");

    // const getStepSelected = (element) => {
    //   return element.charAt(element.length - 1);
    // };

    const restorePreviousButton = () => {
      const previouslySelectedButton = document.querySelector(".selected");
      const buttonText = previouslySelectedButton.textContent;
      const lastCharacter = buttonText.charAt(buttonText.length - 1);
      previouslySelectedButton.textContent = lastCharacter;
    };

    const removeClassFromUnselected = () => {
      step_buttons.forEach(function (boton) {
        boton.classList.remove("selected");
      });
    };

    const addWordToButton = (button, word) => {
      const number = button.textContent;
      button.textContent = word + " " + number;
    };

    const showInstruction = (element) => {
      const lastCharacter = element.textContent.charAt(
        element.textContent.length - 1
      );
      console.log(lastCharacter);

      const instruction = document.getElementById(
        "Instruction " + lastCharacter
      );

      step_instructions.forEach((step_instruction) => {
        step_instruction.classList.remove("show-instruction");
      });

      instruction.classList.toggle("show-instruction");
    };

    step_buttons.forEach((step_button) => {
      step_button.addEventListener("click", function () {
        showInstruction(this);
        restorePreviousButton();
        addWordToButton(this, "Paso");
        removeClassFromUnselected();

        this.classList.toggle("selected");
      });
    });
  </script>
</html>
